{"version":3,"sources":["uni-app:///main.js","webpack:///E:/projects/zero-ai-test/test/pages/zero-chat/zero-chat.vue?a2fc","webpack:///E:/projects/zero-ai-test/test/pages/zero-chat/zero-chat.vue?8d68","webpack:///E:/projects/zero-ai-test/test/pages/zero-chat/zero-chat.vue?8382","webpack:///E:/projects/zero-ai-test/test/pages/zero-chat/zero-chat.vue?469d","uni-app:///pages/zero-chat/zero-chat.vue","webpack:///E:/projects/zero-ai-test/test/uni_modules/zero-ai/components/uni-ai-msg/uni-ai-msg.vue?85b5","webpack:///E:/projects/zero-ai-test/test/uni_modules/zero-ai/components/uni-ai-msg/uni-ai-msg.vue?4ab0","webpack:///E:/projects/zero-ai-test/test/uni_modules/zero-ai/components/uni-ai-msg/uni-ai-msg.vue?3606","webpack:///E:/projects/zero-ai-test/test/uni_modules/zero-ai/components/uni-ai-msg/uni-ai-msg.vue?0287","uni-app:///uni_modules/zero-ai/components/uni-ai-msg/uni-ai-msg.vue","webpack:///E:/projects/zero-ai-test/test/uni_modules/zero-ai/components/uni-ai-msg/uni-ai-msg.vue?2cae","webpack:///E:/projects/zero-ai-test/test/pages/zero-chat/zero-chat.vue?3d1a"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniAiMsg","uniIcons","uniPopup","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","g0","_self","_c","msgList","length","g2","l0","__map","msg","index","$orig","__get_orig","g1","sseIndex","g3","g4","requestState","g5","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","mixins","uniDateformat","isDelete","isAi","nodes","html","highlight","preCode","codeDataList","htmlCode","name","showMoreMenu","mounted","created","props","showCursor","type","default","isLastMsg","content","computed","msgContent","htmlString","methods","copy","uni","showToast","success","title","icon","changeAnswer","removeMsg","trOnclick","attrs","codeDataIndex","className"],"mappings":"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","file":"pages/zero-chat/zero-chat.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;;import '@dcloudio/vue-cli-plugin-uni/packages/uni-push/dist/uni-push.es.js';import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/zero-chat/zero-chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./zero-chat.vue?vue&type=template&id=07f0927c&\"\nvar renderjs\nimport script from \"./zero-chat.vue?vue&type=script&lang=js&\"\nexport * from \"./zero-chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./zero-chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/zero-chat/zero-chat.vue\"\nexport default component.exports","export * from \"-!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zero-chat.vue?vue&type=template&id=07f0927c&\"","var components\ntry {\n  components = {\n    uniAiMsg: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/zero-ai/components/uni-ai-msg/uni-ai-msg\" */ \"@/uni_modules/zero-ai/components/uni-ai-msg/uni-ai-msg.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.msgList.length\n  var g2 = _vm.msgList.length\n  var l0 = _vm.__map(_vm.msgList, function (msg, index) {\n    var $orig = _vm.__get_orig(msg)\n    var g1 =\n      index == _vm.msgList.length - 1 &&\n      _vm.msgList.length % 2 === 0 &&\n      _vm.sseIndex\n    return {\n      $orig: $orig,\n      g1: g1,\n    }\n  })\n  var g3 = _vm.msgList.length\n  var g4 =\n    g3 % 2 !== 0 && !(_vm.requestState == -100) ? _vm.msgList.length : null\n  var g5 = _vm.msgList.length && _vm.msgList.length % 2 !== 0\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g2: g2,\n        l0: l0,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zero-chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zero-chat.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- #ifdef H5 -->\r\n\t<view v-if=\"isWidescreen\" class=\"zero-chat-box\">\r\n\t\t<!-- #endif -->\r\n\t\t<view class=\"container\">\r\n\t\t\t<text class=\"noData\" v-if=\"msgList.length === 0\">没有对话记录</text>\r\n\t\t\t<scroll-view :scroll-into-view=\"scrollIntoView\" scroll-y=\"true\" class=\"msg-list\" :enable-flex=\"true\">\r\n\t\t\t\t<uni-ai-msg ref=\"msg\" v-for=\"(msg,index) in msgList\" :key=\"index\" :msg=\"msg\"\r\n\t\t\t\t\t@changeAnswer=\"changeAnswer\"\r\n\t\t\t\t\t:show-cursor=\"index == msgList.length - 1 && msgList.length%2 === 0 && sseIndex\"\r\n\t\t\t\t\t:isLastMsg=\"index == msgList.length - 1\" @removeMsg=\"removeMsg(index)\"></uni-ai-msg>\r\n\t\t\t\t<template v-if=\"msgList.length%2 !== 0\">\r\n\t\t\t\t\t<view v-if=\"requestState == -100\" class=\"retries-box\">\r\n\t\t\t\t\t\t<text>消息发送失败</text>\r\n\t\t\t\t\t\t<uni-icons @click=\"send\" color=\"#d22\" type=\"refresh-filled\" class=\"retries-icon\"></uni-icons>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tip-ai-ing\" v-else-if=\"msgList.length\">\r\n\t\t\t\t\t\t<text>小猫咪正在思考中...</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\t\t\t\t<view @click=\"closeSseChannel\" class=\"stop-responding\" v-if=\"sseIndex\"> ▣ 停止响应</view>\r\n\t\t\t\t<view id=\"last-msg-item\" style=\"height: 1px;\"></view>\r\n\t\t\t</scroll-view>\r\n\r\n\t\t\t<view class=\"foot-box\" :style=\"{'padding-bottom':footBoxPaddingBottom}\">\r\n\t\t\t\t<view class=\"foot-box-content\">\r\n\t\t\t\t\t<!-- #ifndef H5 -->\r\n\t\t\t\t\t<view class=\"menu\">\r\n\t\t\t\t\t\t<uni-icons class=\"menu-item\" @click=\"showHistory\" type=\"settings\" size=\"24\"\r\n\t\t\t\t\t\t\tcolor=\"#0396FF\"></uni-icons>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<view class=\"textarea-box\">\r\n\t\t\t\t\t\t<textarea v-model=\"content\" :cursor-spacing=\"15\" class=\"textarea\" :auto-height=\"!isWidescreen\"\r\n\t\t\t\t\t\t\tplaceholder=\"请输入要发给小猫咪的内容\" :maxlength=\"-1\" :adjust-position=\"false\"\r\n\t\t\t\t\t\t\t:disable-default-padding=\"false\" placeholder-class=\"input-placeholder\"></textarea>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"send-btn-box\" :title=\"(msgList.length && msgList.length%2 !== 0) ? 'ai正在回复中不能发送':''\">\r\n\t\t\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t\t\t<text v-if=\"isWidescreen\" class=\"send-btn-tip\">↵ 发送 / shift + ↵ 换行</text>\r\n\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t<button @click=\"beforeSend\" :disabled=\"inputBoxDisabled || !content\" class=\"send\"\r\n\t\t\t\t\t\t\t:class=\"{'send-disabled':inputBoxDisabled || !content}\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"paperplane\" size=\"28\" color='#ffffff'></uni-icons>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- #ifdef H5 -->\r\n\t\t</view>\r\n\t\t<!-- #endif -->\r\n\t\t<!-- // 聊天弹窗 -->\r\n\t\t<!-- #ifndef H5 -->\r\n\t\t<uni-popup ref=\"history\" type='left' background-color=\"#fff\">\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t<view class=\"history-pc\">\r\n\t\t\t\t<!-- #endif -->\r\n\r\n\t\t\t\t<view class=\"history-content\" :style=\"{height:popupHeight}\">\r\n\t\t\t\t\t<view class=\"history-create\" @click=\"handleNewOne\">\r\n\t\t\t\t\t\t<uni-icons @click=\"showHistory\" type=\"plusempty\" size=\"20\" color=\"#1aad19\"></uni-icons>\r\n\t\t\t\t\t\t新建聊天\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"provider\">\r\n\t\t\t\t\t\t<view>服务商:</view>\r\n\t\t\t\t\t\t<view v-for=\"(item,index) in providerList\" :key=\"index\" class=\"provider-item\"\r\n\t\t\t\t\t\t\t:class=\"{ 'provider-selected': item.value === currentProvider }\"\r\n\t\t\t\t\t\t\t@click=\"handleChangeProvider(item.value)\">\r\n\t\t\t\t\t\t\t{{item.text}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"history-list\">\r\n\r\n\t\t\t\t\t\t<view v-for=\"(item,index) in historyList\" :key=\"index\" class=\"history-item\"\r\n\t\t\t\t\t\t\t:class=\"{ 'history-selected': index === currentMsgIndex }\"\r\n\t\t\t\t\t\t\t@click=\"handleSelectHistory(index)\">\r\n\t\t\t\t\t\t\t<view class=\"history-title\">{{item.title}}</view>\r\n\r\n\t\t\t\t\t\t\t<view class=\"history-icons\" @click.stop>\r\n\t\t\t\t\t\t\t\t<uni-icons @click=\"handleRename(index)\" class=\"icon\" type=\"compose\" color=\"#333\"\r\n\t\t\t\t\t\t\t\t\tsize=\"22\"></uni-icons>\r\n\t\t\t\t\t\t\t\t<uni-icons @click=\"handleClearHistory(index)\" class=\"icon\" type=\"close\" color=\"#333\"\r\n\t\t\t\t\t\t\t\t\tsize=\"22\"></uni-icons>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- #ifndef H5 -->\r\n\t\t</uni-popup>\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t<zero-privacy :onNeed=\"false\"></zero-privacy>\r\n\t\t<!-- #endif -->\r\n\t</view>\r\n\t<!-- #ifdef H5 -->\r\n\t</view>\r\n\t<!-- #endif -->\r\n</template>\r\n\r\n<script>\r\n\timport zeroai from '@/uni_modules/zero-ai/js_sdk/zeroai.js'\r\n\texport default {\r\n\t\tmixins: [zeroai],\r\n\t}\r\n</script>\r\n<style lang=\"scss\">\r\n\tview {\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\tpage {\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\r\n\t.stop-responding {\r\n\t\tdisplay: flex;\r\n\t\tfont-size: 14px;\r\n\t\tborder-radius: 3px;\r\n\t\tmargin-bottom: 15px;\r\n\t\tbackground-color: #f0b00a;\r\n\t\tcolor: #FFF;\r\n\t\twidth: 90px;\r\n\t\theight: 30px;\r\n\t\tline-height: 30px;\r\n\t\tmargin: 0 auto;\r\n\t\tjustify-content: center;\r\n\t\tmargin-bottom: 15px;\r\n\t\t/* #ifdef H5 */\r\n\t\tcursor: pointer;\r\n\t\t/* #endif */\r\n\t}\r\n\r\n\t.stop-responding:hover {\r\n\t\tbox-shadow: 0 0 10px #aaa;\r\n\t}\r\n\r\n\t.container {\r\n\t\theight: 100%;\r\n\t\tbackground-color: #FAFAFA;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\t// border: 1px solid blue;\r\n\t}\r\n\r\n\t.foot-box {\r\n\t\twidth: 750rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tpadding: 10px 0px;\r\n\t\tbackground-color: #FFF;\r\n\t}\r\n\r\n\t.foot-box-content {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.textarea-box {\r\n\t\tpadding: 8px 10px;\r\n\t\tbackground-color: #f9f9f9;\r\n\t\tborder-radius: 5px;\r\n\t}\r\n\r\n\t.textarea-box .textarea {\r\n\t\tmax-height: 120px;\r\n\t\tfont-size: 14px;\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\toverflow: auto;\r\n\t\t/* #endif */\r\n\t\twidth: 450rpx;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t/* #ifdef H5 */\r\n\t/*隐藏滚动条*/\r\n\t.textarea-box .textarea::-webkit-scrollbar {\r\n\t\twidth: 0;\r\n\t}\r\n\r\n\t/* #endif */\r\n\r\n\t.input-placeholder {\r\n\t\tcolor: #bbb;\r\n\t\tline-height: 18px;\r\n\t}\r\n\r\n\t.trash,\r\n\t.send {\r\n\t\twidth: 50px;\r\n\t\theight: 30px;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.trash {\r\n\t\twidth: 30rpx;\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n\r\n\t.menu {\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tflex-shrink: 0;\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\r\n\t.menu-item {\r\n\t\twidth: 30rpx;\r\n\t\t// margin: 0 10rpx;\r\n\t}\r\n\r\n\t.send {\r\n\t\twidth: 60px;\r\n\t\theight: 34px;\r\n\t\tborder-radius: 30rpx;\r\n\t\tcolor: #FFF;\r\n\t\tdisplay: flex;\r\n\t\tmargin: 0;\r\n\t\tpadding: 0;\r\n\t\tfont-size: 14px;\r\n\t\tmargin-right: 20rpx;\r\n\t\tbackground-color: #0396FF;\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t/* #ifndef H5 */\r\n\t.send {\r\n\t\twidth: 110rpx;\r\n\t\theight: 60rpx;\r\n\t\tborder-radius: 30rpx;\r\n\t\tmargin: 0;\r\n\t\tpadding: 0;\r\n\t\t// font-size: 14px;\r\n\t\tmargin-right: 20rpx;\r\n\t\tcolor: #FFF;\r\n\t\tbackground-color: #0396FF;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t/* #endif */\r\n\r\n\t/* #ifndef APP-NVUE */\r\n\t.send::after {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t/* #endif */\r\n\r\n\r\n\t.msg-list {\r\n\t\theight: 0; //不可省略，先设置为0 再由flex: 1;撑开才是一个滚动容器\r\n\t\tflex: 1;\r\n\t\twidth: 750rpx;\r\n\t\t// border: 1px solid red;\r\n\t}\r\n\r\n\t.noData {\r\n\t\tmargin-top: 15px;\r\n\t\ttext-align: center;\r\n\t\twidth: 750rpx;\r\n\t\tcolor: #aaa;\r\n\t\tfont-size: 12px;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.tip-ai-ing {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tflex-direction: column;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #919396;\r\n\t\tpadding: 15px 0;\r\n\t}\r\n\r\n\t.uni-link {\r\n\t\tmargin-left: 5px;\r\n\t\tline-height: 20px;\r\n\t}\r\n\r\n\t/* #ifdef H5 */\r\n\t@media screen and (min-width:650px) {\r\n\t\t.foot-box {\r\n\t\t\tborder-top: solid 1px #dde0e2;\r\n\t\t}\r\n\r\n\t\t.container,\r\n\t\t.container * {\r\n\t\t\tmax-width: 950px;\r\n\t\t}\r\n\r\n\t\t.container {\r\n\t\t\tbox-shadow: 0 0 5px #e0e1e7;\r\n\t\t\theight: calc(100vh - 88px);\r\n\t\t\tmargin: 0 auto;\r\n\t\t\tborder-radius: 10px;\r\n\t\t\toverflow: hidden;\r\n\t\t\tbackground-color: #FAFAFA;\r\n\t\t}\r\n\r\n\t\tpage {\r\n\t\t\tbackground-color: #efefef;\r\n\t\t}\r\n\r\n\t\t.container .header {\r\n\t\t\tdisplay: flex;\r\n\t\t\theight: 44px;\r\n\t\t\tline-height: 44px;\r\n\t\t\tborder-bottom: 1px solid #F0F0F0;\r\n\t\t\twidth: 100vw;\r\n\t\t\tjustify-content: center;\r\n\t\t\tfont-weight: 500;\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\tbackground-color: #f9f9f9;\r\n\t\t\tposition: relative;\r\n\t\t\tmax-width: 90%;\r\n\t\t}\r\n\r\n\t\t// .copy {\r\n\t\t// \tcolor: #888888;\r\n\t\t// \tposition: absolute;\r\n\t\t// \tright: 8px;\r\n\t\t// \ttop: 8px;\r\n\t\t// \tfont-size: 12px;\r\n\t\t// \tcursor:pointer;\r\n\t\t// }\r\n\t\t// .copy :hover{\r\n\t\t// \tcolor: #4b9e5f;\r\n\t\t// }\r\n\r\n\t\t.foot-box,\r\n\t\t.foot-box-content,\r\n\t\t.msg-list,\r\n\t\t.msg-item,\r\n\t\t// .create_time,\r\n\t\t.noData,\r\n\t\t.textarea-box,\r\n\t\t.textarea,\r\n\t\ttextarea-box {\r\n\t\t\twidth: 100% !important;\r\n\t\t}\r\n\r\n\t\t.textarea-box,\r\n\t\t.textarea,\r\n\t\ttextarea,\r\n\t\ttextarea-box {\r\n\t\t\theight: 120px;\r\n\t\t}\r\n\r\n\t\t.foot-box,\r\n\t\t.textarea-box {\r\n\t\t\tbackground-color: #FFF;\r\n\t\t}\r\n\r\n\t\t.foot-box-content {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: flex-end;\r\n\t\t\tpadding-bottom: 0;\r\n\t\t}\r\n\r\n\t\t.pc-menu {\r\n\t\t\tdisplay: flex;\r\n\t\t\tpadding: 0 10px;\r\n\t\t}\r\n\r\n\t\t.pc-menu-item {\r\n\t\t\theight: 20px;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\talign-content: center;\r\n\t\t\tdisplay: flex;\r\n\t\t\tmargin-right: 10px;\r\n\t\t\tcursor: pointer;\r\n\t\t}\r\n\r\n\t\t.pc-trash {\r\n\t\t\topacity: 0.8;\r\n\t\t}\r\n\r\n\t\t.pc-trash image {\r\n\t\t\theight: 15px;\r\n\t\t}\r\n\r\n\r\n\t\t.textarea-box,\r\n\t\t.textarea-box * {\r\n\t\t\t// border: 1px solid #000;\r\n\t\t}\r\n\r\n\t\t.send-btn-box {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: baseline;\r\n\t\t}\r\n\r\n\t\t.send-btn-box .send-btn-tip {\r\n\t\t\tcolor: #919396;\r\n\t\t\tmargin-right: 8px;\r\n\t\t\tfont-size: 12px;\r\n\t\t\tline-height: 28px;\r\n\t\t}\r\n\t}\r\n\r\n\t/* #endif */\r\n\t.retries-box {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #d2071b;\r\n\t}\r\n\r\n\t.retries-icon {\r\n\t\tmargin-top: 1px;\r\n\t\tmargin-left: 5px;\r\n\t}\r\n\r\n\t.history-content {\r\n\t\twidth: 80vw;\r\n\t\theight: 100%;\r\n\t\tpadding: 20rpx 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tpadding-bottom: calc(env(safe-area-inset-bottom) + 40rpx);\r\n\r\n\t\t.history-create {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\tcolor: #1aad19;\r\n\t\t\tborder: 1px solid #1aad19;\r\n\t\t\tpadding: 15rpx 20rpx;\r\n\t\t\tmargin: 10rpx 20rpx;\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t}\r\n\r\n\t\t.provider {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin: 10rpx 20rpx;\r\n\t\t\tpadding: 20rpx 20rpx;\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t\tbackground-color: #f8f8f8;\r\n\r\n\t\t\t.provider-item {\r\n\t\t\t\t// width: 30%;\r\n\t\t\t\tflex: 1;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tcolor: #333333;\r\n\t\t\t\tpadding: 10rpx 10rpx;\r\n\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t\tmargin: 0 15rpx;\r\n\t\t\t\tbackground-color: #ffffff;\r\n\t\t\t}\r\n\r\n\t\t\t.provider-selected {\r\n\t\t\t\t// background-color: #f0ad4e33;\r\n\t\t\t\tborder: 1px solid #f0ad4e;\r\n\t\t\t\tcolor: #f0ad4e;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.history-list {\r\n\t\t\tpadding: 0 20rpx;\r\n\t\t\theight: 0; //不可省略，先设置为0 再由flex: 1;撑开才是一个滚动容器\r\n\t\t\tflex: 1;\r\n\t\t\toverflow-y: auto;\r\n\t\t}\r\n\r\n\t\t.history-item {\r\n\t\t\tmargin: 20rpx 0;\r\n\t\t\tcolor: #333333;\r\n\t\t\tborder: 1px solid #e5e7eb;\r\n\t\t\tpadding: 15rpx 20rpx;\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.history-title {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\tword-break: break-all;\r\n\t\t\t\twhite-space: nowrap;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t.history-icons {\r\n\t\t\t\t.icon {\r\n\t\t\t\t\tmargin-left: 15rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.history-selected {\r\n\t\t\tbackground-color: #0396FF33;\r\n\t\t\tborder: 1px solid #0396FF;\r\n\t\t\tcolor: #0396FF;\r\n\r\n\t\t\t.history-icons {\r\n\t\t\t\ttext {\r\n\t\t\t\t\tcolor: #0396FF !important;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.zero-chat-box {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row-reverse;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\r\n\t\t.container {\r\n\t\t\tflex: 1;\r\n\t\t\tmargin: 0;\r\n\t\t}\r\n\r\n\t\t.history-pc {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tbox-shadow: 0 0 5px #e0e1e7;\r\n\t\t\tmargin-right: 5px;\r\n\t\t\theight: calc(100vh - 88px);\r\n\t\t\tborder-radius: 5px;\r\n\t\t\toverflow: hidden;\r\n\r\n\t\t\t.history-content {\r\n\t\t\t\twidth: 400px;\r\n\t\t\t\tpadding-bottom: 0;\r\n\r\n\t\t\t\t.history-list {}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import { render, staticRenderFns, recyclableRender, components } from \"./uni-ai-msg.vue?vue&type=template&id=4c1b37fd&\"\nvar renderjs\nimport script from \"./uni-ai-msg.vue?vue&type=script&lang=js&\"\nexport * from \"./uni-ai-msg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./uni-ai-msg.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/zero-ai/components/uni-ai-msg/uni-ai-msg.vue\"\nexport default component.exports","export * from \"-!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uni-ai-msg.vue?vue&type=template&id=4c1b37fd&\"","var components\ntry {\n  components = {\n    uniDateformat: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat\" */ \"@/uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    !_vm.msg.isDelete && _vm.msg.isAi ? _vm.nodes && _vm.nodes.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uni-ai-msg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uni-ai-msg.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"msg-item\" v-if=\"!msg.isDelete\">\r\n\t\t<view class=\"create_time-box\" :class=\"{'reverse-time':!msg.isAi}\">\r\n\t\t\t<uni-dateformat class=\"create_time\" :date=\"msg.create_time\" format=\"MM/dd hh:mm:ss\"></uni-dateformat>\r\n\t\t</view>\r\n\t\t<view :class=\"{reverse:!msg.isAi}\">\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<view v-if=\"msg.isAi\" class=\"rich-text-box\" :class=\"{'show-cursor':showCursor}\" ref=\"rich-text-box\">\r\n\t\t\t\t\t<rich-text v-if=\"nodes&&nodes.length\" space=\"nbsp\" :nodes=\"nodes\" :user-select='true'\r\n\t\t\t\t\t\t@itemclick=\"trOnclick\"></rich-text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"content-user\" v-else>{{msgContent}}</view>\r\n\t\t\t\t<view class=\"menu-box\" :class='{\"menu-box-ai\":msg.isAi}'>\r\n\t\t\t\t\t<!-- <uni-icons v-if=\"isLastMsg && msg.isAi\" title=\"换一个答案\" @click=\"changeAnswer\" color=\"#ccc\"\r\n\t\t\t\t\t\tclass=\"change-answer\" type=\"reload\" size=\"22\"></uni-icons> -->\r\n\t\t\t\t\t<view @click=\"copy\" title=\"复制\" class=\"copy-icon\">\r\n\t\t\t\t\t\t<view class=\"copy-icon-a\"></view>\r\n\t\t\t\t\t\t<view class=\"copy-icon-b\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- <uni-icons class=\"remove-msg\" @click=\"removeMsg\" type=\"trash\" size=\"20\" color=\"#ccc\"></uni-icons> -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// 引入markdown-it库\r\n\timport MarkdownIt from '../../lib/markdown-it.min.js'\r\n\r\n\t// hljs是由 Highlight.js 经兼容性修改后的文件，请勿直接升级。否则会造成uni-app-vue3-Android下有兼容问题\r\n\timport hljs from '../../lib/highlight/highlight-uni.min.js'\r\n\r\n\t// 引入html-parser.js库\r\n\timport parseHtml from '../../lib/html-parser.js'\r\n\r\n\r\n\t// 为复制代码功能保留代码内容\r\n\tlet codeDataList = []\r\n\r\n\t// 初始化 MarkdownIt库\r\n\tconst markdownIt = MarkdownIt({\r\n\t\t// 在源码中启用 HTML 标签\r\n\t\thtml: true,\r\n\t\t// 如果结果以 <pre ... 开头，内部包装器则会跳过。\r\n\t\thighlight: function(str, lang) {\r\n\t\t\t// if (lang && hljs.getLanguage(lang)) {\r\n\t\t\t// \tconsole.error('lang', lang)\r\n\t\t\t// \ttry {\r\n\t\t\t// \t\treturn '<pre class=\"hljs\" style=\"padding: 5px 8px;margin: 5px 0;overflow: auto;display: block;\"><code>' +\r\n\t\t\t// \t\t\thljs.highlight('lang', str, true).value +\r\n\t\t\t// \t\t\t'</code></pre>';\r\n\t\t\t// \t} catch (__) {}\r\n\t\t\t// }\r\n\t\t\t// 经过highlight.js处理后的html\r\n\t\t\tlet preCode = \"\"\r\n\t\t\ttry {\r\n\t\t\t\tpreCode = hljs.highlightAuto(str).value\r\n\t\t\t} catch (err) {\r\n\t\t\t\t// console.log('err',err);\r\n\t\t\t\tpreCode = markdownIt.utils.escapeHtml(str);\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// 以换行进行分割\r\n\t\t\tconst lines = preCode.split(/\\n/).slice(0, -1)\r\n\t\t\t// 添加自定义行号\r\n\t\t\tlet html = lines.map((item, index) => {\r\n\t\t\t\t// 去掉空行\r\n\t\t\t\tif (item == '') {\r\n\t\t\t\t\treturn ''\r\n\t\t\t\t}\r\n\t\t\t\treturn '<li><span class=\"line-num\" data-line=\"' + (index + 1) + '\"></span>' + item +\r\n\t\t\t\t\t'</li>'\r\n\t\t\t}).join('')\r\n\t\t\thtml = '<ol style=\"padding: 0px 30px;\">' + html + '</ol>'\r\n\r\n\t\t\t// 代码复制功能\r\n\t\t\tcodeDataList.push(str)\r\n\t\t\tlet htmlCode =\r\n\t\t\t\t`<div style=\"background:#0d1117;margin:5px 0;color: #888;padding:5px 0;border-radius: 5px;\">`\r\n\t\t\t// #ifndef MP-WEIXIN\r\n\t\t\thtmlCode += `<div style=\"text-align: end;font-size: 12px;\">`\r\n\t\t\thtmlCode +=\r\n\t\t\t\t`${lang}<a class=\"copy-btn\" code-data-index=\"${codeDataList.length - 1}\" style=\"cursor: pointer;\"> 复制代码 </a>`\r\n\t\t\thtmlCode += `</div>`\r\n\t\t\t// #endif\r\n\t\t\thtmlCode +=\r\n\t\t\t\t`<pre class=\"hljs\" style=\"padding:8px;overflow: auto;display: block;border-radius: 5px;font-size:13px\"><code>${html}</code></pre>`;\r\n\t\t\thtmlCode += '</div>'\r\n\t\t\treturn htmlCode\r\n\t\t}\r\n\t})\r\n\r\n\texport default {\r\n\t\tname: \"uni-ai-msg\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowMoreMenu: false\r\n\t\t\t};\r\n\t\t},\r\n\t\tmounted() {},\r\n\t\tcreated() {},\r\n\t\tprops: {\r\n\t\t\t// 是否显示鼠标闪烁的效果\r\n\t\t\tshowCursor: {\r\n\t\t\t\ttype: [Boolean, Number],\r\n\t\t\t\tdefault () {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tisLastMsg: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault () {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tmsg: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault () {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tcontent: \"\",\r\n\t\t\t\t\t\tisDelete: false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tmsgContent() {\r\n\t\t\t\treturn this.msg.content\r\n\t\t\t},\r\n\t\t\tnodes() {\r\n\t\t\t\tif (!this.msgContent) {\r\n\t\t\t\t\treturn //处理特殊情况，比如网络异常导致的响应的 content 的值为空\r\n\t\t\t\t}\r\n\t\t\t\tlet htmlString = ''\r\n\t\t\t\t// 修改转换结果的htmlString值 用于正确给界面增加鼠标闪烁的效果\r\n\t\t\t\t// 判断markdown中代码块标识符的数量是否为偶数\r\n\t\t\t\tif (this.msgContent.split(\"```\").length % 2) {\r\n\t\t\t\t\tlet msgContent = this.msgContent\r\n\t\t\t\t\tif (msgContent[msgContent.length - 1] != '\\n') {\r\n\t\t\t\t\t\tmsgContent += '\\n'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmsgContent += ' <span class=\"cursor\">|</span>'\r\n\t\t\t\t\thtmlString = markdownIt.render(msgContent);\r\n\t\t\t\t} else {\r\n\t\t\t\t\thtmlString = markdownIt.render(this.msgContent) + ' \\n <span class=\"cursor\">|</span>';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// #ifndef APP-NVUE\r\n\t\t\t\treturn htmlString\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// nvue模式下将htmlString转成htmlArray，其他情况rich-text内部转\r\n\t\t\t\t// 注：本示例项目还没使用nvue编译\r\n\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\treturn parseHtml(htmlString)\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\r\n\t\t\t// 复制文本内容到系统剪切板\r\n\t\t\tcopy() {\r\n\t\t\t\tuni.setClipboardData({\r\n\t\t\t\t\tdata: this.msgContent,\r\n\t\t\t\t\tshowToast: false,\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '复制成功',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// this.showMoreMenu = false\r\n\t\t\t},\r\n\t\t\t// 重新获取回答 (已禁用)\r\n\t\t\tchangeAnswer() {\r\n\t\t\t\tthis.$emit('changeAnswer')\r\n\t\t\t},\r\n\t\t\t// 删除消息 (已禁用)\r\n\t\t\tremoveMsg() {\r\n\t\t\t\tthis.$emit('removeMsg')\r\n\t\t\t\tthis.showMoreMenu = false\r\n\t\t\t},\r\n\t\t\t// 代码片段复制 (不支持小程序)\r\n\t\t\ttrOnclick(e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tlet {\r\n\t\t\t\t\tattrs\r\n\t\t\t\t} = e.detail.node\r\n\t\t\t\tconsole.log({\r\n\t\t\t\t\tattrs\r\n\t\t\t\t});\r\n\t\t\t\tlet {\r\n\t\t\t\t\t\"code-data-index\": codeDataIndex,\r\n\t\t\t\t\t\"class\": className\r\n\t\t\t\t} = attrs\r\n\t\t\t\tif (className == 'copy-btn') {\r\n\t\t\t\t\t// console.log('codeDataList[codeDataIndex]',codeDataList[codeDataIndex]);\r\n\t\t\t\t\tuni.setClipboardData({\r\n\t\t\t\t\t\tdata: codeDataList[codeDataIndex],\r\n\t\t\t\t\t\tshowToast: false,\r\n\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '复制成功',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\tview {\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.msg-item {\r\n\t\tposition: relative;\r\n\t\twidth: 750rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tpadding: 0 16rpx;\r\n\t\tpadding-bottom: 15px;\r\n\t}\r\n\r\n\t.create_time-box {\r\n\t\tmargin-top: 15px;\r\n\r\n\t\t.create_time {\r\n\t\t\tfont-size: 12px;\r\n\t\t\tpadding: 5px 0;\r\n\t\t\tpadding-top: 0;\r\n\t\t\tcolor: #aaa;\r\n\t\t}\r\n\t}\r\n\r\n\t.reverse-time {\r\n\t\tdisplay: flex;\r\n\t\ttext-align: right;\r\n\t\tjustify-content: flex-end;\r\n\t}\r\n\r\n\t.content {\r\n\t\tdisplay: flex;\r\n\t\tposition: relative;\r\n\t\tmax-width: calc(100% - 80rpx);\r\n\t\tword-break: break-all;\r\n\t\tuser-select: text;\r\n\t\tcursor: text;\r\n\t\tbackground-color: #FFF;\r\n\t\tborder-radius: 0px 8px 8px 8px;\r\n\t\tpadding: 16rpx 20rpx;\r\n\t\tflex-direction: column;\r\n\t\tcolor: #333333;\r\n\t\tfont-size: 32rpx;\r\n\r\n\t\t.content-user {\r\n\t\t\t white-space: pre-wrap;\r\n\t\t\tword-wrap: break-word;\r\n\t\t\tword-break: break-all;\r\n\t\t}\r\n\r\n\t\t::-webkit-scrollbar {\r\n\t\t\tdisplay: none !important;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t.menu-box {\r\n\t\tdisplay: flex;\r\n\t\tposition: absolute;\r\n\t\tleft: -22px;\r\n\t\tbottom: 0;\r\n\t\twidth: 20px;\r\n\t\tflex-direction: column;\r\n\t\theight: 60px;\r\n\t\tjustify-content: flex-end;\r\n\t}\r\n\r\n\t.menu-box-ai {\r\n\t\tleft: auto;\r\n\t\tright: -22px;\r\n\t}\r\n\r\n\t.change-answer {\r\n\t\tmargin-bottom: 5px;\r\n\t\tposition: relative;\r\n\t\ttransform: rotate(90deg);\r\n\t}\r\n\r\n\t.copy-icon {\r\n\t\tposition: relative;\r\n\t\theight: 25px;\r\n\t\twidth: 20px;\r\n\t}\r\n\r\n\t.copy-icon-a,\r\n\t.copy-icon-b {\r\n\t\tposition: absolute;\r\n\t\tborder: 1.5px solid #d4d4d4;\r\n\t\twidth: 10px;\r\n\t\theight: 12px;\r\n\t\tbackground-color: #FFF;\r\n\t\tleft: 3px;\r\n\t\ttop: 4px;\r\n\t\tborder-radius: 3px;\r\n\t}\r\n\r\n\t.copy-icon-b {\r\n\t\ttop: 8px;\r\n\t\tleft: 6px;\r\n\t}\r\n\r\n\t.copy-icon:hover .copy-icon-a,\r\n\t.copy-icon:hover .copy-icon-b,\r\n\t{\r\n\tborder-color: #bbb;\r\n\t}\r\n\r\n\t.content ::v-deep rich-text {\r\n\t\tmax-width: 100%;\r\n\t\toverflow: auto;\r\n\t}\r\n\r\n\tcode .l:before {\r\n\t\tcolor: #516363;\r\n\t\tposition: absolute;\r\n\t\tleft: 15px;\r\n\t\tcontent: counter(step);\r\n\t\tcounter-increment: step;\r\n\t}\r\n\r\n\t.reverse {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row-reverse;\r\n\t}\r\n\r\n\t.reverse .content {\r\n\t\tborder-radius: 5px 0px 5px 5px;\r\n\t\tbackground: #0396FF;\r\n\t\tcolor: #ffffff;\r\n\t}\r\n\r\n\t.reverse-align {\r\n\t\talign-items: flex-end;\r\n\t}\r\n\r\n\t@import \"./uni-ai-msg.scss\";\r\n</style>","import mod from \"-!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uni-ai-msg.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./uni-ai-msg.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zero-chat.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\zhy\\\\Softwares\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zero-chat.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}